---
import Layout from '@/layouts/Layout.astro';
import Header from '@/components/Header.astro';

const user = Astro.locals.user;
console.error('[PAGE DEBUG] test-user.astro - user:', JSON.stringify(user));
console.error('[PAGE DEBUG] test-user.astro - user type:', typeof user);
console.error('[PAGE DEBUG] test-user.astro - user truthy:', !!user);
---

<Layout title="User Test" bodyClass="bg-blue-100 min-h-screen flex flex-col items-center p-4">
  <Header user={user} />
  <div class="bg-white rounded-lg shadow-md p-6 w-full max-w-7xl">
    <h1 class="text-2xl font-bold text-center mb-4">User Debug Test</h1>
    <div class="bg-gray-100 p-4 rounded">
      <h2 class="text-lg font-semibold mb-2">User Object:</h2>
      <pre class="text-sm">{JSON.stringify(user, null, 2)}</pre>
    </div>
    <div class="mt-4">
      <p><strong>User exists:</strong> {user ? 'Yes' : 'No'}</p>
      <p><strong>User type:</strong> {typeof user}</p>
      {user && (
        <div>
          <p><strong>Username:</strong> {user.username}</p>
          <p><strong>ID:</strong> {user.id}</p>
          <p><strong>Email:</strong> {user.email}</p>
        </div>
      )}
    </div>
  </div>
</Layout>